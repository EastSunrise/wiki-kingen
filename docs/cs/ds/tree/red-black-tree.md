# 红黑树

红黑树是一颗二叉搜索树，它在每个结点上增加一个存储位表示该结点的颜色，RED 或 BLACK。通过对任意从根到叶子结点（NIL 结点）的简单路径上各结点颜色的约束，红黑树可以确保没有一条路径会比其他路径长出两倍，因而是近似**平衡**的。

## 性质

红黑树满足以下性质：

1. 每个结点要么是红色的，要么是黑色的；
2. 根节点是黑色的；
3. 每个叶子结点（NIL）是黑色的；
4. 如果一个结点是红色的，则它的两个子结点都是黑色的；
5. 对每个结点，从该结点到其所有后代叶子结点的简单路径上，均包含相同数目的黑色结点。

从某个结点 $x$ 出发（不包含该结点）到达一个叶子结点的任意一条简单路径上的黑色结点个数称为该结点的**黑高**，记作 $bh(x)$。红黑树的黑高为其根结点的黑高。

根据数学归纳法，结合性质 4 和 5 可得，以任一结点 $x$ 为根的子树中至少包含 $2^{bh(x)}-1$ 个内部结点（带关键字的结点）。

设 $h$ 为树的高度，$n$ 为树的内部结点的数目，根据性质 4 可知树的黑高至少为 $h/2$，从而

$$
n\ge 2^{bh} - 1 \ge 2^{h/2}-1
$$

取对数可得

$$
h \le 2\lg (n+1)
$$

即，**一棵有 $n$ 个内部结点的红黑树的高度至多为 $2\lg(n+1)$**，那么在红黑树的查找操作的时间复杂度为 $O(\lg n)$.

## 参考

- Cormeo T H, et al. 算法导论. 原书第 3 版. 第 13 章.
